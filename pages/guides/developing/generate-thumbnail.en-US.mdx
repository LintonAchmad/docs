---
title: 'Generate thumbnail for assets'
description: 'Learn how to generate thumbnails for your assets on the server side using Node.js and Python.'
---

import { Callout } from 'nextra-theme-docs';

# Generate thumbnail for assets

Thumbnails can be created on the front-end or on the server side of an application.

While it is possible to generate thumbnails on the front-end, it is generally more resource-intensive and may not be suitable for larger videos. Therefore, it is often recommended to generate thumbnails on the server side. In this guide, you will learn how to generate video thumbnails on the server side using Node.js and Python.

## Node.js

Generating thumbnails for your assets with node.js is pretty easy. We will be using a FFmpeg package which is very straightforward and easy.

### Set up a node project

The first step is to setup a node.js project. Open your terminal and run the following command.

```jsx
 mkdir server && cd server && npm init -y
```

This command will create a new directory called `server` and initialize a Node.js project inside of it. Next, we need to install a few dependencies to our application. Go ahead and run the below command to install `express` and `ffmpeg`.

```jsx
npm install express fluent-ffmpeg
```

`express` is a popular web framework for node.js that makes it easy to build web applications and APIs.
`ffmpeg` is a powerful too for working with video/audio file.

### Generate thumbnails

Now that you have installed the necessary dependencies, it is time to create a REST API that can be used to generate thumbnails for your assets. To do this, you will need to create a new file called **`index.js`** in the root directory of your project and add the following code to it:

```jsx
const express = require('express');
const app = express();
// set port
const port = 3000;

// define a route handler for the generate-thumbnail endpoint
app.get('/generate-thumbnail', (req, res) => {
  // send back a response
  res.send('Hello World!');
});

// start the express server
app.listen(port, () => {
  console.log(`server listening on port ${port}`);
});
```

The above code is a simple node application that listens for a GET request at the endpoint `/generate-thumbnail`. To start the app, simply run `node index.js`
in your terminal and then navigate to [http://localhost:3000/generate-thumbnail](http://localhost:3000/generate-thumbnail)
in your browser. If the app is running correctly, you should see the message "Hello World!" displayed in the browser.

To generate a thumbnail using FFmpeg, you will need to import the package at the top of your `index.js` file like this:

```jsx
const ffmpeg = require('fluent-ffmpeg');
```

Finally, update update the `/generate-thumbnail`route with the following code:

```jsx
app.get('/generate-thumbnail', (req, res) => {
  // get video link from req.query
  const { url } = req.query;

  // generate thumbnail
  ffmpeg(url)
    .FPS(1) // frame per second
    .screenshots({
      timestamps: ['1'], // take a screenshot at 1 second
      filename: 'thumbnail.jpg', // name of the generated thumbnail
      size: '1280x720', // size of the generated thumbnail
      duration: 1, // duration of the video
    })
    .on('error', console.error) // handle errors
    .on('end', () => {
      // send back a response
      res.send('Screenshot taken');
    });
});
```

In the above code, we are using FFmpeg to generate a thumbnail from the first second of the video, which is specified using the `timestamps` parameter. The thumbnail will be saved as a file named "thumbnail.jpg" with a resolution of 1280x720.

The `on` method is used to handle any errors or to send a response when the
thumbnail has been successfully generated.

To test your thumbnail generation API, you will need to restart the server for your Node.js app and navigate to the following URL in your web browser:

```txt
http://localhost:3000/generate-thumbnail?url=https://lp-playback.com/hls/6689x2884egm65ti/index.m3u8
```

Be sure to replace the video URL with the actual playback URL for your video, which you can find in the Livepeer Studio dashboard. Once you have entered the correct URL, the API should generate a thumbnail for the specified video and send a response “Screenshot taken”

>

<Callout>
  If you encounter any errors or issues, you can check the console output for
  more information.
</Callout>
![Screenshot-Taken](/images/thumbnail/1.png)

Go to your project directory and you should be able to see `thumbnail.jpg`. These thumbnails can also be saved on S3, IPFS and Arweave.

![Image](/images/thumbnail/2.png)

### Generate multiple thumbnails

To generate multiple thumbnails at different time frames, just replace the FFmpeg function with the below code,

```jsx
ffmpeg(url)
  .screenshots({
    timestamps: ['1', '2', '3'], // take a screenshot at 1, 2 and 3 seconds
    filename: 'thumbnail-at-%s-seconds.png', // name of the generated thumbnail
    size: '1280x720 ', // size of the generated thumbnail
    duration: 5, // duration of the video
  })
  .on('error', console.error) // handle errors
  .on('end', () => {
    // send back a response
    res.send('Screenshot taken');
  });
```

If you send a request to API, you should now be able to see multiple thumbnails.

![Multiple-Image](/images/thumbnail/3.png)

## Python

If you app is built with Python, you can use the following steps to generate thumbnails.

### Set up a python project

The first step is to setup a python project. Open your terminal and run the following command.

```bash
mkdir server && cd server && touch app.py
```

This command will create a new directory called `server` and initialize a python project inside of it. Next, we need to install a few dependencies to our application. Go ahead and run the below command to install and `ffmpeg`.

```bash
pip install ffmpeg-python
```

The `ffmpeg-python` package is a Python wrapper for FFmpeg. It provides a simple API for running FFmpeg commands using Python.

### Generate thumbnails

Once the necessary dependencies installed, open `app.py` and add the following code to it.

```py
import ffmpeg
input_url = input('Enter the URL of the video: ')

input_file = ffmpeg.input(input_url)
# Set the frame rate to 1 frame per second
input_file = input_file.filter('fps', fps=1)
# Generate the thumbnail at the first second of the video
input_file = input_file.filter('scale', '1280x720').filter('trim', start=0, end=1) # scale and trim
(
    ffmpeg.output(input_file, 'thumbnail.jpg', vframes=1) # vframes is the number of frames to output
    .run(overwrite_output=True)
)

```

Run the above code and enter the video URL when prompted. The thumbnail will be saved as `thumbnail.jpg` in the same directory as the `app.py` file.

![Python-Image](/images/thumbnail/4.png)

### Generate multiple thumbnails

To generate multiple thumbnails at different time frames, just replace the app.py code with the below snippet.

```py
import ffmpeg

input_url = input('Enter the video url: ')

times = [1, 2, 3]  # list of times to generate the thumbnails

for time in times:
    input_file = ffmpeg.input(input_url)
    # Set the frame rate to 1 frame per second
    input_file = input_file.filter('fps', fps=1)
    # Generate the thumbnail at the specified time of the video
    input_file = input_file.filter('scale', '1280x720').filter('trim', start=time, end=time+1)  # scale and trim
    (
        ffmpeg.output(input_file, f'thumbnail_{time}.jpg', vframes=1)  # vframes is the number of frames to output
        .run(overwrite_output=True)
    )
```

This method is bit different from node.js method. Here we are looping through the points and generating thumbnails at each point. If you run the above code, you should be able to see multiple thumbnails in the same directory.

![Python-Multiple-Image](/images/thumbnail/5.png)
